<div class="table-wrapper">  
    <button  class="btn btn-success" id="btnAddGroupTop" data-tooltip="Thêm nhóm" data-position="top left" (click)="openEdit()"><i class="add icon"></i> Thêm nhóm mới</button>
    <nz-table class="table table-striped table-hover" style="width: 100%;">
        <thead>
            <tr>
                <th nzLeft></th>
                <th> Tên nhóm</th>
                <th> Số lượng thành viên</th>
                <th nzRight> Quyền</th>
     
            </tr>
        </thead>
        <tbody>
            <tr  *ngFor="let group of groups" (click)="selectGroup(group)" [ngClass]="{positive: group.isSelected}">
                <td class="collapsing">
                    <button class="no-animate ui compact icon button" (click)="toggleEdit(group, $event);">
                        <i  class="write icon"></i>
                    </button>
                </td>
                <td class=" ">
                    <h4 class="ui header">
                        <div class="content">
                            <span>{{group.name}}</span>
                            <div class="sub header">{{group.description}}</div>
                        </div>
                    </h4>
                </td>
                <td>
                    <div class="ui  segments">
                        <div class="ui secondary segment">
                            <span>{{group.users.length}}</span> thành viên
                        </div>
                        <div class="ui tertiary segment" *ngIf="group.isSelected">
                            <div class="ui middle aligned selection divided list">
                                <div class="item" *ngFor="let user of group.users">
                                    <img [src]="user.picture" class="left floated mini ui rounded image">
                                    <div class="content">
                                        <div class="header">{{user.username}}</div>
                                        <span>{{user.email}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="ui  segments">
                        <div class="ui secondary segment">
                            {{group.permissionsStats.total - group.permissionsStats.none}} quyền ({{group.permissionsStats.read || 0}} Xem | {{group.permissionsStats.update
                            || 0}} Cập nhật | {{group.permissionsStats.manage || 0}} Quản lý)
                        </div>
                        <div class="ui tertiary segment" *ngIf="group.isSelected && group.permissionsStats.total - group.permissionsStats.none !== 0">
                            <div class="ui middle aligned selection divided list">
                                <ng-container *ngFor="let permission of group.permissions | keyvalue">
                                    <div class="item" *ngIf="permission.value !== 'none'">
                                        <div class="content">
                                            <div class="header">{{permissionToText[$any(permission.key)]}}</div>
                                            {{roleToText[$any(permission.value)]}}
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </nz-table>

</div>